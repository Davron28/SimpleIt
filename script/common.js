"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}var btn=document.querySelector(".header__burger"),btnMenu=document.querySelector(".header__menu");btn.addEventListener("click",function(){btnMenu.classList.toggle("active"),btn.classList.toggle("active")});var ItcAccordion=function(){function a(b,c){_classCallCheck(this,a),this._el="string"==typeof b?document.querySelector(b):b;this._config=Object.assign({alwaysOpen:!1},c),this.addEventListener()}return _createClass(a,[{key:"addEventListener",value:function addEventListener(){var a=this;this._el.addEventListener("click",function(b){var c=b.target.closest(".accordion__header");if(!c)return b.target.closest(".accordion__header");if(!a._config.alwaysOpen){var d=a._el.querySelector(".accordion__item_show");d&&(d===c.parentElement?null:d.classList.toggle("accordion__item_show"))}c.parentElement.classList.toggle("accordion__item_show")})}}]),a}();new ItcAccordion("#accordion-1");var forEach=function(a,b,c){for(var d=0;d<a.length;d++)b.call(c,d,a[d])},spinner=document.querySelector("#spinner"),angle=0,images=document.querySelectorAll("#spinner figure"),numpics=images.length,degInt=360/numpics,start=0,current=1;forEach(images,function(a){images[a].style.webkitTransform="rotateY(-"+start+"deg)",images[a].style.transform="rotateY(-"+start+"deg)",images[a].addEventListener("click",function(){this.classList.contains("current")&&this.classList.toggle("focus")}),start+=degInt});function setCurrent(a){document.querySelector("figure#spinner figure:nth-child("+a+")").classList.add("current")}function galleryspin(a){forEach(images,function(a){images[a].classList.remove("current"),images[a].classList.remove("focus"),images[a].classList.remove("caption")}),a?(angle-=degInt,--current,0==current&&(current=numpics)):(angle+=degInt,++current,current>numpics&&(current=1)),spinner.setAttribute("style","-webkit-transform: rotateY("+angle+"deg); transform: rotateY("+angle+"deg)"),setCurrent(current)}document.body.onkeydown=function(a){switch(a.which){case 37:galleryspin("-");break;case 39:galleryspin("");break;case 90:document.querySelector("figure#spinner figure.current").classList.toggle("focus");break;case 67:document.querySelector("figure#spinner figure.current").classList.toggle("caption");break;default:return;}a.preventDefault()};function mouseMove(){}function mouseUp(){document.removeEventListener("mousemove",mouseMove,!1),document.removeEventListener("mouseup",mouseUp,!1)}spinner.addEventListener("mousedown",function(a){a.pageX;document.addEventListener("mousemove",mouseMove,!1),document.addEventListener("mouseup",mouseUp,!1)},!1),setCurrent(1);var features=document.querySelectorAll(".feature"),observer=new IntersectionObserver(function(a){a.forEach(function(a){console.log(a),.4<a.intersectionRatio?a.target.classList.add("show-feature"):a.target.classList.remove("show-feature")})},{threshold:.4});features.forEach(function(a){return observer.observe(a)}),console.log(observer);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvbmF2LmpzIiwiY29tbW9uLmpzIiwiY29tcG9uZW50cy9hY2NvcmRpb24uanMiLCJjb21wb25lbnRzL3NsaWRlcjEuanMiXSwibmFtZXMiOlsiYnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnRuTWVudSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJJdGNBY2NvcmRpb24iLCJ0YXJnZXQiLCJjb25maWciLCJfZWwiLCJfY29uZmlnIiwiT2JqZWN0IiwiYXNzaWduIiwiYWx3YXlzT3BlbiIsImUiLCJlbEhlYWRlciIsImNsb3Nlc3QiLCJlbE9wZW5JdGVtIiwicGFyZW50RWxlbWVudCIsImZvckVhY2giLCJhcnJheSIsImNhbGxiYWNrIiwic2NvcGUiLCJpIiwibGVuZ3RoIiwiY2FsbCIsInNwaW5uZXIiLCJhbmdsZSIsImltYWdlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJudW1waWNzIiwiZGVnSW50Iiwic3RhcnQiLCJjdXJyZW50IiwiaW5kZXgiLCJzdHlsZSIsIndlYmtpdFRyYW5zZm9ybSIsInRyYW5zZm9ybSIsImNvbnRhaW5zIiwic2V0Q3VycmVudCIsImFkZCIsImdhbGxlcnlzcGluIiwic2lnbiIsInJlbW92ZSIsInNldEF0dHJpYnV0ZSIsImJvZHkiLCJvbmtleWRvd24iLCJ3aGljaCIsInByZXZlbnREZWZhdWx0IiwibW91c2VNb3ZlIiwibW91c2VVcCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJwYWdlWCIsImZlYXR1cmVzIiwib2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsInNlY3Rpb25zIiwic2VjdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJpbnRlcnNlY3Rpb25SYXRpbyIsInRocmVzaG9sZCIsImZlYXR1cmUiLCJvYnNlcnZlIl0sIm1hcHBpbmdzIjoia2NBQUEsR0FBQUEsQ0FBQUEsR0FBQSxDQUFBQyxRQUFBLENBQUFDLGFBQUEsQ0FBQSxpQkFBQSxDQUFBLENB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QUFsRCxNQUFBLENBQUFILFNBQUEsQ0FBQXVDLE1BQUEsQ0FBQSxjQUFBLENBRUEsQ0FQQSxDQVFBLENBVEEsQ0FTQSxDQUNBa0IsU0FBQSxDQUFBLEVBREEsQ0FUQSxDLENBYUFSLFFBQUEsQ0FBQWxDLE9BQUEsQ0FBQSxTQUFBMkMsQ0FBQSxRQUFBUixDQUFBQSxRQUFBLENBQUFTLE9BQUEsQ0FBQUQsQ0FBQSxDQUFBLENBQUEsQyxDQUdBSixPQUFBLENBQUFDLEdBQUEsQ0FBQUwsUUFBQSxDIiwiZmlsZSI6ImNvbW1vbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19idXJnZXInKSxcclxuICAgIGJ0bk1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19tZW51Jyk7XHJcblxyXG5idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBidG5NZW51LmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG4gICAgYnRuLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG59KSIsImxldCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19idXJnZXInKSxcclxuICAgIGJ0bk1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19tZW51Jyk7XHJcblxyXG5idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBidG5NZW51LmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG4gICAgYnRuLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG59KVxyXG5jbGFzcyBJdGNBY2NvcmRpb24ge1xyXG4gICAgY29uc3RydWN0b3IodGFyZ2V0LCBjb25maWcpIHtcclxuICAgICAgICB0aGlzLl9lbCA9IHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpIDogdGFyZ2V0O1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDb25maWcgPSB7XHJcbiAgICAgICAgICAgIGFsd2F5c09wZW46IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRDb25maWcsIGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XHJcbiAgICB9XHJcbiAgICBhZGRFdmVudExpc3RlbmVyKCkge1xyXG4gICAgICAgIHRoaXMuX2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZWxIZWFkZXIgPSBlLnRhcmdldC5jbG9zZXN0KCcuYWNjb3JkaW9uX19oZWFkZXInKTtcclxuICAgICAgICAgICAgaWYgKCFlbEhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGUudGFyZ2V0LmNsb3Nlc3QoJy5hY2NvcmRpb25fX2hlYWRlcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fY29uZmlnLmFsd2F5c09wZW4pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsT3Blbkl0ZW0gPSB0aGlzLl9lbC5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkaW9uX19pdGVtX3Nob3cnKTtcclxuICAgICAgICAgICAgICAgIGlmIChlbE9wZW5JdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxPcGVuSXRlbSAhPT0gZWxIZWFkZXIucGFyZW50RWxlbWVudCA/IGVsT3Blbkl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnYWNjb3JkaW9uX19pdGVtX3Nob3cnKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxIZWFkZXIucGFyZW50RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdhY2NvcmRpb25fX2l0ZW1fc2hvdycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5uZXcgSXRjQWNjb3JkaW9uKCcjYWNjb3JkaW9uLTEnKTtcclxuLy8gZm9yRWFjaCBtZXRob2RcclxudmFyIGZvckVhY2ggPSBmdW5jdGlvbiAoYXJyYXksIGNhbGxiYWNrLCBzY29wZSkge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNhbGxiYWNrLmNhbGwoc2NvcGUsIGksIGFycmF5W2ldKTtcclxuICAgIH1cclxufTtcclxuXHJcbnZhciBzcGlubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzcGlubmVyXCIpLFxyXG4gICAgYW5nbGUgPSAwLFxyXG4gICAgaW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNzcGlubmVyIGZpZ3VyZVwiKSxcclxuICAgIG51bXBpY3MgPSBpbWFnZXMubGVuZ3RoLFxyXG4gICAgZGVnSW50ID0gMzYwIC8gbnVtcGljcyxcclxuICAgIHN0YXJ0ID0gMCxcclxuICAgIGN1cnJlbnQgPSAxO1xyXG5cclxuZm9yRWFjaChpbWFnZXMsIGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcclxuICAgIGltYWdlc1tpbmRleF0uc3R5bGUud2Via2l0VHJhbnNmb3JtID0gXCJyb3RhdGVZKC1cIiArIHN0YXJ0ICsgXCJkZWcpXCI7XHJcbiAgICBpbWFnZXNbaW5kZXhdLnN0eWxlLnRyYW5zZm9ybSA9IFwicm90YXRlWSgtXCIgKyBzdGFydCArIFwiZGVnKVwiO1xyXG4gICAgaW1hZ2VzW2luZGV4XS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucygnY3VycmVudCcpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShcImZvY3VzXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICBzdGFydCA9IHN0YXJ0ICsgZGVnSW50O1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIHNldEN1cnJlbnQoY3VycmVudCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZmlndXJlI3NwaW5uZXIgZmlndXJlOm50aC1jaGlsZCgnICsgY3VycmVudCArICcpJykuY2xhc3NMaXN0LmFkZCgnY3VycmVudCcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnYWxsZXJ5c3BpbihzaWduKSB7XHJcbiAgICBmb3JFYWNoKGltYWdlcywgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xyXG4gICAgICAgIGltYWdlc1tpbmRleF0uY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudCcpO1xyXG4gICAgICAgIGltYWdlc1tpbmRleF0uY2xhc3NMaXN0LnJlbW92ZSgnZm9jdXMnKTtcclxuICAgICAgICBpbWFnZXNbaW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcHRpb24nKTtcclxuICAgIH0pXHJcblxyXG4gICAgaWYgKCFzaWduKSB7XHJcbiAgICAgICAgYW5nbGUgPSBhbmdsZSArIGRlZ0ludDtcclxuICAgICAgICBjdXJyZW50ID0gKGN1cnJlbnQgKyAxKTtcclxuICAgICAgICBpZiAoY3VycmVudCA+IG51bXBpY3MpIHtcclxuICAgICAgICAgICAgY3VycmVudCA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhbmdsZSA9IGFuZ2xlIC0gZGVnSW50O1xyXG4gICAgICAgIGN1cnJlbnQgPSBjdXJyZW50IC0gMTtcclxuICAgICAgICBpZiAoY3VycmVudCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBudW1waWNzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzcGlubmVyLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZVkoXCIgKyBhbmdsZSArIFwiZGVnKTsgdHJhbnNmb3JtOiByb3RhdGVZKFwiICsgYW5nbGUgKyBcImRlZylcIik7XHJcbiAgICBzZXRDdXJyZW50KGN1cnJlbnQpO1xyXG59XHJcblxyXG5kb2N1bWVudC5ib2R5Lm9ua2V5ZG93biA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBzd2l0Y2ggKGUud2hpY2gpIHtcclxuICAgICAgICBjYXNlIDM3OiAvLyBsZWZ0IGN1cnNvclxyXG4gICAgICAgICAgICBnYWxsZXJ5c3BpbignLScpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSAzOTogLy8gcmlnaHQgY3Vyc29yXHJcbiAgICAgICAgICAgIGdhbGxlcnlzcGluKCcnKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgOTA6IC8vIFogLSB6b29tIGltYWdlIGluIGZvcmVmcm9udCBpbWFnZVxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmaWd1cmUjc3Bpbm5lciBmaWd1cmUuY3VycmVudCcpLmNsYXNzTGlzdC50b2dnbGUoJ2ZvY3VzJyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIDY3OiAvLyBDIC0gc2hvdyBjYXB0aW9uIGZvciBmb3JlZnJvbnQgaW1hZ2VcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZmlndXJlI3NwaW5uZXIgZmlndXJlLmN1cnJlbnQnKS5jbGFzc0xpc3QudG9nZ2xlKCdjYXB0aW9uJyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm47IC8vIGV4aXQgdGhpcyBoYW5kbGVyIGZvciBvdGhlciBrZXlzXHJcbiAgICB9XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1vdXNlTW92ZSgpIHtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1vdXNlVXAoKSB7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG1vdXNlTW92ZSwgZmFsc2UpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgbW91c2VVcCwgZmFsc2UpO1xyXG59XHJcblxyXG5zcGlubmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgIHZhciBzdGFydFggPSBlLnBhZ2VYO1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbW91c2VNb3ZlLCBmYWxzZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBtb3VzZVVwLCBmYWxzZSk7XHJcbn0sIGZhbHNlKTtcclxuXHJcbnNldEN1cnJlbnQoMSk7XHJcbmNvbnN0IGZlYXR1cmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZlYXR1cmUnKTtcclxuXHJcbiBsZXQgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoc2VjdGlvbnMgPT4ge1xyXG4gICAgc2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhzZWN0aW9uKVxyXG4gICAgICAgIGlmIChzZWN0aW9uLmludGVyc2VjdGlvblJhdGlvID4gMC40KSB7XHJcbiAgICAgICAgICAgIHNlY3Rpb24udGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3Nob3ctZmVhdHVyZScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlY3Rpb24udGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3ctZmVhdHVyZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59LCB7XHJcbiAgICB0aHJlc2hvbGQ6IDAuNFxyXG59KTtcclxuXHJcbmZlYXR1cmVzLmZvckVhY2goZmVhdHVyZSA9PiBvYnNlcnZlci5vYnNlcnZlKGZlYXR1cmUpKVxyXG5cclxuXHJcbmNvbnNvbGUubG9nKG9ic2VydmVyKTsiLCJjbGFzcyBJdGNBY2NvcmRpb24ge1xyXG4gICAgY29uc3RydWN0b3IodGFyZ2V0LCBjb25maWcpIHtcclxuICAgICAgICB0aGlzLl9lbCA9IHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpIDogdGFyZ2V0O1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDb25maWcgPSB7XHJcbiAgICAgICAgICAgIGFsd2F5c09wZW46IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRDb25maWcsIGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XHJcbiAgICB9XHJcbiAgICBhZGRFdmVudExpc3RlbmVyKCkge1xyXG4gICAgICAgIHRoaXMuX2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZWxIZWFkZXIgPSBlLnRhcmdldC5jbG9zZXN0KCcuYWNjb3JkaW9uX19oZWFkZXInKTtcclxuICAgICAgICAgICAgaWYgKCFlbEhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGUudGFyZ2V0LmNsb3Nlc3QoJy5hY2NvcmRpb25fX2hlYWRlcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fY29uZmlnLmFsd2F5c09wZW4pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsT3Blbkl0ZW0gPSB0aGlzLl9lbC5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkaW9uX19pdGVtX3Nob3cnKTtcclxuICAgICAgICAgICAgICAgIGlmIChlbE9wZW5JdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxPcGVuSXRlbSAhPT0gZWxIZWFkZXIucGFyZW50RWxlbWVudCA/IGVsT3Blbkl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnYWNjb3JkaW9uX19pdGVtX3Nob3cnKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxIZWFkZXIucGFyZW50RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdhY2NvcmRpb25fX2l0ZW1fc2hvdycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5uZXcgSXRjQWNjb3JkaW9uKCcjYWNjb3JkaW9uLTEnKTsiLCIvLyBmb3JFYWNoIG1ldGhvZFxyXG52YXIgZm9yRWFjaCA9IGZ1bmN0aW9uIChhcnJheSwgY2FsbGJhY2ssIHNjb3BlKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY2FsbGJhY2suY2FsbChzY29wZSwgaSwgYXJyYXlbaV0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxudmFyIHNwaW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NwaW5uZXJcIiksXHJcbiAgICBhbmdsZSA9IDAsXHJcbiAgICBpbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI3NwaW5uZXIgZmlndXJlXCIpLFxyXG4gICAgbnVtcGljcyA9IGltYWdlcy5sZW5ndGgsXHJcbiAgICBkZWdJbnQgPSAzNjAgLyBudW1waWNzLFxyXG4gICAgc3RhcnQgPSAwLFxyXG4gICAgY3VycmVudCA9IDE7XHJcblxyXG5mb3JFYWNoKGltYWdlcywgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xyXG4gICAgaW1hZ2VzW2luZGV4XS5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSBcInJvdGF0ZVkoLVwiICsgc3RhcnQgKyBcImRlZylcIjtcclxuICAgIGltYWdlc1tpbmRleF0uc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGVZKC1cIiArIHN0YXJ0ICsgXCJkZWcpXCI7XHJcbiAgICBpbWFnZXNbaW5kZXhdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdjdXJyZW50JykpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiZm9jdXNcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIHN0YXJ0ID0gc3RhcnQgKyBkZWdJbnQ7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gc2V0Q3VycmVudChjdXJyZW50KSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmaWd1cmUjc3Bpbm5lciBmaWd1cmU6bnRoLWNoaWxkKCcgKyBjdXJyZW50ICsgJyknKS5jbGFzc0xpc3QuYWRkKCdjdXJyZW50Jyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdhbGxlcnlzcGluKHNpZ24pIHtcclxuICAgIGZvckVhY2goaW1hZ2VzLCBmdW5jdGlvbiAoaW5kZXgsIHZhbHVlKSB7XHJcbiAgICAgICAgaW1hZ2VzW2luZGV4XS5jbGFzc0xpc3QucmVtb3ZlKCdjdXJyZW50Jyk7XHJcbiAgICAgICAgaW1hZ2VzW2luZGV4XS5jbGFzc0xpc3QucmVtb3ZlKCdmb2N1cycpO1xyXG4gICAgICAgIGltYWdlc1tpbmRleF0uY2xhc3NMaXN0LnJlbW92ZSgnY2FwdGlvbicpO1xyXG4gICAgfSlcclxuXHJcbiAgICBpZiAoIXNpZ24pIHtcclxuICAgICAgICBhbmdsZSA9IGFuZ2xlICsgZGVnSW50O1xyXG4gICAgICAgIGN1cnJlbnQgPSAoY3VycmVudCArIDEpO1xyXG4gICAgICAgIGlmIChjdXJyZW50ID4gbnVtcGljcykge1xyXG4gICAgICAgICAgICBjdXJyZW50ID0gMTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFuZ2xlID0gYW5nbGUgLSBkZWdJbnQ7XHJcbiAgICAgICAgY3VycmVudCA9IGN1cnJlbnQgLSAxO1xyXG4gICAgICAgIGlmIChjdXJyZW50ID09IDApIHtcclxuICAgICAgICAgICAgY3VycmVudCA9IG51bXBpY3M7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNwaW5uZXIuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCItd2Via2l0LXRyYW5zZm9ybTogcm90YXRlWShcIiArIGFuZ2xlICsgXCJkZWcpOyB0cmFuc2Zvcm06IHJvdGF0ZVkoXCIgKyBhbmdsZSArIFwiZGVnKVwiKTtcclxuICAgIHNldEN1cnJlbnQoY3VycmVudCk7XHJcbn1cclxuXHJcbmRvY3VtZW50LmJvZHkub25rZXlkb3duID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIHN3aXRjaCAoZS53aGljaCkge1xyXG4gICAgICAgIGNhc2UgMzc6IC8vIGxlZnQgY3Vyc29yXHJcbiAgICAgICAgICAgIGdhbGxlcnlzcGluKCctJyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIDM5OiAvLyByaWdodCBjdXJzb3JcclxuICAgICAgICAgICAgZ2FsbGVyeXNwaW4oJycpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSA5MDogLy8gWiAtIHpvb20gaW1hZ2UgaW4gZm9yZWZyb250IGltYWdlXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2ZpZ3VyZSNzcGlubmVyIGZpZ3VyZS5jdXJyZW50JykuY2xhc3NMaXN0LnRvZ2dsZSgnZm9jdXMnKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgNjc6IC8vIEMgLSBzaG93IGNhcHRpb24gZm9yIGZvcmVmcm9udCBpbWFnZVxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmaWd1cmUjc3Bpbm5lciBmaWd1cmUuY3VycmVudCcpLmNsYXNzTGlzdC50b2dnbGUoJ2NhcHRpb24nKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybjsgLy8gZXhpdCB0aGlzIGhhbmRsZXIgZm9yIG90aGVyIGtleXNcclxuICAgIH1cclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbW91c2VNb3ZlKCkge1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gbW91c2VVcCgpIHtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbW91c2VNb3ZlLCBmYWxzZSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBtb3VzZVVwLCBmYWxzZSk7XHJcbn1cclxuXHJcbnNwaW5uZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgdmFyIHN0YXJ0WCA9IGUucGFnZVg7XHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBtb3VzZU1vdmUsIGZhbHNlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG1vdXNlVXAsIGZhbHNlKTtcclxufSwgZmFsc2UpO1xyXG5cclxuc2V0Q3VycmVudCgxKTsiXX0=
